"use strict";(self.webpackChunkdocusaurus_site=self.webpackChunkdocusaurus_site||[]).push([[4637],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return d}});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=a.createContext({}),o=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=o(e.components);return a.createElement(p.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},s=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,i=e.originalType,p=e.parentName,m=u(e,["components","mdxType","originalType","parentName"]),s=o(n),d=l,N=s["".concat(p,".").concat(d)]||s[d]||k[d]||i;return n?a.createElement(N,r(r({ref:t},m),{},{components:n})):a.createElement(N,r({ref:t},m))}));function d(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=s;var u={};for(var p in t)hasOwnProperty.call(t,p)&&(u[p]=t[p]);u.originalType=e,u.mdxType="string"==typeof e?e:l,r[1]=u;for(var o=2;o<i;o++)r[o]=n[o];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},56975:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return p},default:function(){return d},frontMatter:function(){return u},metadata:function(){return o},toc:function(){return k}});var a=n(87462),l=n(63366),i=(n(67294),n(3905)),r=["components"],u={title:"\u7f51\u7edc\u5b89\u88c5 Ubuntu",date:"2019-11-04 11:03:36 +0800",description:" ",authors:"wKevin",categories:["it"],tags:["ubuntu","pxe"]},p=void 0,o={permalink:"/blog/2019/11/04/ubuntu.net.stall",source:"@site/blog/2019-11-04-ubuntu.net.stall/index.md",title:"\u7f51\u7edc\u5b89\u88c5 Ubuntu",description:" ",date:"2019-11-04T11:03:36.000Z",formattedDate:"November 4, 2019",tags:[{label:"ubuntu",permalink:"/blog/tags/ubuntu"},{label:"pxe",permalink:"/blog/tags/pxe"}],truncated:!0,authors:[{name:"wKevin",title:"\u4e00\u9897\u5411\u4e0a\u7684\u6c34\u6ef4",url:"http://weibo.com/wkevin27",imageURL:"/img/avastar/angry.bird-l.jpg",key:"wKevin"}],frontMatter:{title:"\u7f51\u7edc\u5b89\u88c5 Ubuntu",date:"2019-11-04 11:03:36 +0800",description:" ",authors:"wKevin",categories:["it"],tags:["ubuntu","pxe"]},prevItem:{title:"\u300a\u4f01\u4e1a IT \u67b6\u6784\u8f6c\u578b\u4e4b\u9053\u300b\u8bfb\u4e66\u7b14\u8bb0",permalink:"/blog/2019/11/10/book-ali.it.art"},nextItem:{title:"\u654f\u6377\u4e66\u8c31",permalink:"/blog/2019/09/20/agile.book.map"}},m={authorsImageUrls:[void 0]},k=[{value:"DHCP",id:"dhcp",level:2},{value:"tftp",id:"tftp",level:2},{value:"\u7f51\u7edc\u542f\u52a8\u6587\u4ef6\uff08 pxelinux.0 )",id:"\u7f51\u7edc\u542f\u52a8\u6587\u4ef6-pxelinux0-",level:2},{value:"\u51c6\u5907 Ubuntu",id:"\u51c6\u5907-ubuntu",level:2},{value:"kernel &amp; initrd",id:"kernel--initrd",level:2},{value:"Ubuntu live images",id:"ubuntu-live-images",level:2},{value:"NFS",id:"nfs",level:3},{value:"Apache",id:"apache",level:3},{value:"Client \u914d\u7f6e",id:"client-\u914d\u7f6e",level:2}],s={toc:k};function d(e){var t=e.components,n=(0,l.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"\u6458\u8981\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u901a\u8fc7 pxe \u6a21\u5f0f\uff0c\u7f51\u7edc\u5b89\u88c5 Ubuntu\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u591a\u4e2a Ubuntu \u7248\u672c\u53ef\u9009\u6027\u5b89\u88c5\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u7528\u4e8e\u65e0\u6cd5\u5f00\u673a\u7bb1\u8fdb\u884c\u5149\u9a71\u5b89\u88c5\u3001\u6216\u4e0d\u60f3\u6298\u817e\u641e\u786c\u76d8\u5b89\u88c5\u3001\u6216 USB \u88ab\u516c\u53f8\u5c01\u95ed\u65e0\u6cd5 U \u76d8\u5b89\u88c5\u7684\u670b\u53cb\u3002")),(0,i.kt)("p",null,"\u53c2\u8003\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.maketecheasier.com/configure-pxe-server-ubuntu/"},"Configure PXE Server In Ubuntu 16.04")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.cnblogs.com/zhangqunshi/p/6729823.html"},"\u7f51\u7edc\u5b89\u88c5 Ubuntu16.04"))),(0,i.kt)("p",null,"\u57fa\u672c\u6b65\u9aa4\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Client BISO \u914d\u7f6e\uff1a1\u3001\u7f51\u5361\u542f\u52a8\uff1b2\u3001\u7f51\u5361\u652f\u6301 pxe \u6a21\u5f0f"),(0,i.kt)("li",{parentName:"ul"},"Client \u5728 BIOS \u9636\u6bb5\u901a\u8fc7 DHCP \u627e Server \u8981\u5230 IP \u5730\u5740"),(0,i.kt)("li",{parentName:"ul"},"Server \u5206\u914d IP\uff0c\u540c\u65f6\u6307\u5b9a pxe \u7684\u542f\u52a8\u6587\u4ef6 pxelinux"),(0,i.kt)("li",{parentName:"ul"},"Client \u901a\u8fc7 tftp \u534f\u8bae\u4e0b\u8f7d pxelinux \u6587\u4ef6"),(0,i.kt)("li",{parentName:"ul"},"Client \u901a\u8fc7 pxelinux \u7684\u914d\u7f6e\u4fe1\u606f\uff08kernel ... initrd=...\uff09\uff0c\u901a\u8fc7 tftp \u4e0b\u8f7d kernel & initrd"),(0,i.kt)("li",{parentName:"ul"},"Client \u901a\u8fc7 pxelinux \u7684\u914d\u7f6e\u4fe1\u606f\uff08nfsroot=...)\uff0c\u901a\u8fc7 http \u6216 nfs \u4e0b\u8f7d ubuntu \u7684 live images")),(0,i.kt)("p",null,"\u5e72\u8d27\u5982\u4e0b\uff1a"),(0,i.kt)("h2",{id:"dhcp"},"DHCP"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo apt-get install isc-dhcp-server")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /etc/default/isc-dhcp-server")," \u9650\u5b9a\u7f51\u5361\u5f00\u542f dhcp"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /etc/dhcp/dhcpd.conf"))),(0,i.kt)("p",null,"example1: server(192.168.1.100)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'option domain-name "localhost";  # \u5fc5\u987b\u8981\u6539\uff0c\u5426\u5219syslog\u62a5\u5f02\u5e38\uff0cpxe client IP\u65e0\u6cd5\u83b7\u53d6\noption domain-name-servers \u672c\u673aIP\u5730\u5740;  # \u5fc5\u987b\u8981\u6539\uff0c\u672c\u673aIP\u5730\u5740\u5fc5\u987b\u4e5f\u8981\u5728192.168.1.0/24\u7f51\u6bb5\u4e2d\n\nallow booting;\nallow bootp;\n\nsubnet 192.168.1.0 netmask 255.255.255.0 {\n    range 192.168.1.10 192.168.1.30;\n    option subnet-mask 255.255.255.0;\n    option routers \u672c\u673aIP\u5730\u5740;\n    option broadcast-address 192.168.1.255;\n    next-server \u672c\u673aIP\u5730\u5740;\n    filename "pxelinux.0";\n}\n')),(0,i.kt)("p",null,"example2: server(192.168.1.2)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'subnet 192.168.1.0 netmask 255.255.255.0 {\n   range 192.168.1.3 192.168.1.11;\n   option routers 192.168.1.2;\n   option subnet-mask 255.255.255.0;\n   option broadcast-address 192.168.1.255;\n   option domain-name-servers 192.168.1.2;\n   next-server 192.168.1.2;\n   filename "pxelinux.0";\n}\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo /etc/init.d/isc-dhcp-server start")," \u2014\u2014 \u53ef\u4ee5\u52a0\u5165 ",(0,i.kt)("inlineCode",{parentName:"li"},"/etc/rc.local")),(0,i.kt)("li",{parentName:"ul"},"Test:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"service isc-dhcp-server status"))))),(0,i.kt)("h2",{id:"tftp"},"tftp"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo apt install tftpd-hpa tftp-hpa inetutils-inetd")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo service tftpd-hpa start")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /etc/inetd.conf"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"tftp dgram udp wait root /usr/sbin/in.tftpd /usr/sbin/in.tftpd -s /var/lib/tftpboot\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /etc/default/tftpd-hpa"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'TFTP_USERNAME="tftp"\nTFTP_DIRECTORY="/var/lib/tftpboot"\nTFTP_ADDRESS=":69"\nTFTP_OPTIONS="--secure"\nRUN_DAEMON="yes"\nOPTIONS="-l -s /var/lib/tftpboot"\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo update-inetd --enable BOOT")," \u91cd\u542f\u65f6\u81ea\u542f\u52a8"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo service tftpd-hpa start")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"netstat -lu | grep tftp")," check"),(0,i.kt)("li",{parentName:"ul"},"test",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"tftp localhost")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"get ..."))))),(0,i.kt)("h2",{id:"\u7f51\u7edc\u542f\u52a8\u6587\u4ef6-pxelinux0-"},"\u7f51\u7edc\u542f\u52a8\u6587\u4ef6\uff08 pxelinux.0 )"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo mkdir /var/lib/tftpboot")),(0,i.kt)("li",{parentName:"ul"},"3 \u79cd\u83b7\u53d6\u65b9\u5f0f",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u65b9\u5f0f 1\uff1a\u4ece ",(0,i.kt)("strong",{parentName:"li"},"syslinux")," \u62f7\u8d1d \u2014\u2014 ",(0,i.kt)("strong",{parentName:"li"},"\u6ca1\u6709\u9ed8\u8ba4\u914d\u7f6e"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo apt install syslinux")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo mkdir /var/lib/tftpboot/pxelinux.cfg")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo cp /usr/lib/syslinux/vesamenu.c32 /var/lib/tftpboot/")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo cp /usr/lib/syslinux/pxelinux.0 /var/lib/tftpboot/")))),(0,i.kt)("li",{parentName:"ul"},"\u65b9\u5f0f 2\uff1a\u4ece ISO \u4e2d\u83b7\u53d6 \u2014\u2014 ",(0,i.kt)("strong",{parentName:"li"},"\u540e\u6765\u5f88\u591a ISO \u90fd\u6ca1\u6709\u4e86")),(0,i.kt)("li",{parentName:"ul"},"\u65b9\u5f0f 3\uff1a\u7f51\u4e0a\u4e0b\u8f7d ",(0,i.kt)("strong",{parentName:"li"},"netboot")," \u2014\u2014 ",(0,i.kt)("strong",{parentName:"li"},"\u63a8\u8350"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"wget http://archive.ubuntu.com/ubuntu/dists/[precise|xenial]/main/installer-[amd64|i386]/current/images/netboot/netboot.tar.gz"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u5728 mirrors.xxx \u4e2d\u627e\u5230"),(0,i.kt)("li",{parentName:"ul"},"precise: 12.04; xenial: 16.04"),(0,i.kt)("li",{parentName:"ul"},"eg: ",(0,i.kt)("inlineCode",{parentName:"li"},"wget https://mirrors.zte.com.cn/ubuntu/dists/bionic/main/installer-amd64/current/images/netboot/netboot.tar.gz")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"mv netboot.tar.gz /var/lib/tftpboot")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cd /var/lib/tftpboot && sudo tar -xzvf netboot.tar.gz")))))),(0,i.kt)("li",{parentName:"ul"},"\u914d\u7f6e pxe \u83b7\u53d6 kernel \u548c initrd \u7684\u65b9\u5f0f\u548c\u8def\u5f84 \u2014\u2014 ",(0,i.kt)("strong",{parentName:"li"},"\u6b64\u5904\u914d\u7f6e\u8981\u548c\u540e\u9762 nfs\u3001apache \u4e2d\u914d\u7f6e\u4e00\u81f4"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /var/lib/tftpboot/ubuntu-installer/[amd64|i386]/boot-screens/txt.cfg")," \u2014\u2014 ",(0,i.kt)("strong",{parentName:"li"},"\u65b0\u7248"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /var/lib/tftpboot/pxelinux.cfg/default")," \u2014\u2014 ",(0,i.kt)("strong",{parentName:"li"},"\u65e7\u7248")))),(0,i.kt)("li",{parentName:"ul"},"\u91cd\u70b9\u914d\u7f6e\u4e0b\u9762 2 \u884c",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"kernel ......")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"append initrd=...... ks=......")),(0,i.kt)("li",{parentName:"ul"},"\u5177\u4f53\u600e\u4e48\u914d\u7f6e\u4e0b\u6587\u5206\u65b9\u5f0f\u63cf\u8ff0")))))),(0,i.kt)("h2",{id:"\u51c6\u5907-ubuntu"},"\u51c6\u5907 Ubuntu"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4e0b\u8f7d ubuntu iso",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://mirrors.zte.com.cn/ubuntu-releases")))),(0,i.kt)("li",{parentName:"ul"},"\u8def\u5f84\u8bbe\u8ba1",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u652f\u6301\u591a\u4e2a\u7248\u672c Ubuntu \u540c\u65f6\u5b89\u88c5"),(0,i.kt)("li",{parentName:"ul"},"Ubuntu \u91ca\u653e\u6587\u4ef6\u5230\uff1a",(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/tftpboot/ubuntu/xx.xx")," xx.xx \u4e3a ubuntu \u7684\u7248\u672c\u53f7\uff0c\u6839\u636e\u9700\u6c42\u53ef\u4ee5\u8bbe\u8ba1\u66f4\u590d\u6742\u8def\u5f84"))),(0,i.kt)("li",{parentName:"ul"},"\u51c6\u5907 16.04",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo mount -o loop ubuntu-16.04.3-desktop-amd64.iso /media/")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo mkdir -p /var/lib/tftpboot/ubuntu/16.04")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo cp -r /media/* /var/lib/tftpboot/ubuntu/16.04")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo cp -r /media/.disk /var/lib/tftpboot/ubuntu/16.04")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo unmout /media")))),(0,i.kt)("li",{parentName:"ul"},"\u51c6\u5907 18.04",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo mount -o loop ubuntu-18.04.3-desktop-amd64.iso /media/")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo mkdir -p /var/lib/tftpboot/ubuntu/18.04")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo cp -r /media/* /var/lib/tftpboot/ubuntu/18.04")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo cp -r /media/.disk /var/lib/tftpboot/ubuntu/18.04")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo umount /media"))))),(0,i.kt)("h2",{id:"kernel--initrd"},"kernel & initrd"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /var/lib/tftpboot/ubuntu-installer/[amd64|i386]/boot-screens/txt.cfg")),(0,i.kt)("li",{parentName:"ul"},"\u65b9\u5f0f 1\uff1a\u4f7f\u7528 ISO \u4e2d casper \u7684 initrd.lz \u548c kernel(vmlinuz.efi) \u2014\u2014 ",(0,i.kt)("strong",{parentName:"li"},"\u652f\u6301 nfs"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"pxe \u914d\u7f6e",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"16.04",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"kernel ubuntu/16.04/casper/vmlinuz.efi")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"append vga=788 boot=casper netboot=nfs nfsroot=<\u672c\u673aIP>:/var/lib/tftpboot/ubuntu/16.04 initrd=ubuntu/16.04/casper/initrd.lz --- quiet"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"splash\uff1a\u8868\u793a loading \u5c4f\u5e55\u662f\u5426\u663e\u793a\uff0c\u7981\u7528\u7684\u8bdd loading \u65f6\u4e00\u7247\u7a7a\u767d"))))),(0,i.kt)("li",{parentName:"ul"},"18.04",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"kernel ubuntu/18.04/casper/vmlinuz")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"append vga=788 boot=casper netboot=nfs nfsroot=<\u672c\u673aIP>:/var/lib/tftpboot/ubuntu/18.04 initrd=ubuntu/18.04/casper/initrd --- quiet")))))))),(0,i.kt)("li",{parentName:"ul"},"\u65b9\u5f0f 2\uff1a\u4f7f\u7528 netboot \u5305\u542b\u7684 initrd.gz \u548c kernel(linux) \u2014\u2014 ",(0,i.kt)("strong",{parentName:"li"},"\u4e0d\u652f\u6301 nfs\uff0c\u4e14 client \u59cb\u7ec8\u9ed8\u8ba4 http \u8bbf\u95ee server\uff0c\u8981\u6c42 server \u5fc5\u987b\u4f7f\u7528 apache"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u524d\u9762 netboot \u5df2\u7ecf\u91ca\u653e\u5230 ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/tftpboot")," \u76ee\u5f55\u4e0b"),(0,i.kt)("li",{parentName:"ul"},"pxe \u914d\u7f6e",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"kernel ubuntu-installer/amd64/linux")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"append vga=788 netboot=nfs nfsroot=192.168.1.10:/var/lib/tftpboot/ubuntu initrd=ubuntu-installer/amd64/initrd.gz quiet splash"))))))),(0,i.kt)("h2",{id:"ubuntu-live-images"},"Ubuntu live images"),(0,i.kt)("h3",{id:"nfs"},"NFS"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo apt install nfs-kernel-server")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /etc/exports"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/tftpboot/ubuntu *(ro,async,no_root_squash,no_subtree_check)")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo exportfs -a")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo /etc/init.d/nfs-kernel-server start"))),(0,i.kt)("h3",{id:"apache"},"Apache"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo apt-get install apache2")),(0,i.kt)("li",{parentName:"ul"},"\u914d\u7f6e\uff1a",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u2026\u2026")))),(0,i.kt)("h2",{id:"client-\u914d\u7f6e"},"Client \u914d\u7f6e"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"BIOS",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"net interface pxe mode\uff1a enable"),(0,i.kt)("li",{parentName:"ul"},"security boot\uff1adisable"),(0,i.kt)("li",{parentName:"ul"},"\u4e0d\u80fd\u7528 UEFI,\u8981\u5207\u6362\u5230 legace only"),(0,i.kt)("li",{parentName:"ul"},"boot sequence\uff1anet first"))),(0,i.kt)("li",{parentName:"ul"},"\u63a8\u8350",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u96c6\u6210\u663e\u5361\uff0cpxelinux \u5bf9\u6269\u5c55\u663e\u5361\u652f\u6301\u4e0d\u5b8c\u5907\uff08\u5f02\u5e38\u9ed1\u5c4f\u3001\u84dd\u5c4f\u3001\u7c89\u5c4f\u2026\u2026\uff09",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"BIOS \u4e2d\u5207\u6362\u5230 IDG\uff08\u96c6\u6210\u663e\u5361\uff09\uff0c\u800c\u4e0d\u662f Auto\uff08\u4f1a\u81ea\u52a8\u5230 PEG-PCI-E \u663e\u5361\uff09"))),(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u5c0f\u5c3a\u5bf8\u7684\u663e\u793a\u5668\uff0cpxelinux \u5927\u663e\u793a\u5668\u652f\u6301\u4e0d\u5b8c\u5907\uff08\u5b57\u4f53\u3001\u56fe\u6807\u8fc7\u5927\u2026\u2026\uff09"))),(0,i.kt)("li",{parentName:"ul"},"\u5b89\u88c5\u5b8c\u6bd5\u540e\uff0c\u7f51\u5361\u4e0d\u80fd\u4f7f\u7528",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"NetworkManager \u4e2d\u627e\u4e0d\u5230\u7f51\u5361",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u539f\u56e0 1\uff1aNetworkManager \u6ca1\u6709\u4f7f\u80fd"),(0,i.kt)("li",{parentName:"ul"},"\u89e3\u51b3",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /etc/NetworkManager/NetworkManager.conf")," \u589e\u52a0 ",(0,i.kt)("inlineCode",{parentName:"li"},"managed=true")," \u2014\u2014 \u4f7f\u80fd NM"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo service NetworkManager stop")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo rm /var/lib/NetworkManager/NetworkManager.state")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo service NetworkManager start")))),(0,i.kt)("li",{parentName:"ul"},"\u539f\u56e0 2\uff1a\u5e95\u5c42\u4e0d\u8ba9 NetworkManager \u8d77\u6548"),(0,i.kt)("li",{parentName:"ul"},"\u89e3\u51b3\uff1a",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo vi /etc/network/interfaces")," \u8fd9\u662f\u5e95\u5c42\u7ba1\u7406\u7f51\u5361\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u6709\u5220\u6389\u8fd9\u91cc\u7ba1\u7406 eth0 \u7b49\u884c\uff0c\u653e\u6743\u7ed9 NetworkManager \u7ba1\u7406")))))))))}d.isMDXComponent=!0}}]);